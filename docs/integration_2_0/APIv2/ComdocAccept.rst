######################################################################
**Створення квитанції №2 (прийняття документа COMDOC)**
######################################################################

Для роботи з цим методом користувач повинен бути `авторизованим <https://wiki.edi-n.com/ru/latest/integration_2_0/API/Authorization.html>`__ .

За допомогою POST методу **api/v2/eds/comdoc/accept** можливо прийняти документ COMDOC.

+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
|                       **Метод запиту**                       |                                                        **HTTP POST**                                                        |
+==============================================================+=============================================================================================================================+
| **Content-Type**                                             | application/json (тіло HTTP запиту / відповіді в json форматі)                                                              |
+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
| **URL запиту**                                               | **https://edo-v2.edi-n.com/api/v2/eds/comdoc/accept**?gln=9864065702429&doc_uuid=c1f6a1d0-5aaf-4a06-b78d-71c238f70986       |
+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
| **Параметри, що передаються в URL (разом з адресою методу)** | У рядку заголовка (Header) "Cookie" обов'язково передається **SID** - токен отриманий при авторизації                       |
|                                                              |                                                                                                                             |
|                                                              | **Обов'язкові url-параметри:**                                                                                              |
|                                                              |                                                                                                                             |
|                                                              | **gln** - рядок (13); номер GLN організації, яка пов'язана з авторизованим користувачем платформи EDIN 2.0 на рівні акаунта |
|                                                              |                                                                                                                             |
|                                                              | **doc_uuid** - рядок; UUID документа COMDOC                                                                                 |
+--------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+

.. hint:: Також можливо виконати запит у вигляді curl-рядка:
          
          curl -X POST 'https://edo-v2.edi-n.com/api/v2/eds/comdoc/accept?gln=9864065702429&doc_uuid=c1f6a1d0-5aaf-4a06-b78d-71c238f70986' -d {json - тело документа} -b 'SID=458a0d38-5b56-4b8e-8998-009a1edd31eb'

Специфікація для розшифровки ключів curl запиту: https://curl.haxx.se/docs/manpage.html

**JSON-параметри в тілі HTTP запиту/відповіді**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

``REQUEST``

У цьому методі в json-тілі **запиту** передаються дані для здійснення операції прийняття:

Таблиця 1 - Опис json-параметрів **запиту**

+----------+--------------------+-------------------+--------------------------------+
| Параметр | Mandatory/Optional |      Формат       |              Опис              |
+==========+====================+===================+================================+
| signs    | M                  | ArrayList<Signs_> | Масив об'єктів; підписи        |
+----------+--------------------+-------------------+--------------------------------+
| signInfo | M                  | SignInfo_         | Об'єкт; інформація про підписи |
+----------+--------------------+-------------------+--------------------------------+

Таблиця 2 - Опис параметрів об'єкта **Signs**

.. csv-table:: 
  :file: for_csv/Signs.csv
  :widths:  1, 7, 12, 41
  :header-rows: 1
  :stub-columns: 0

Таблиця 3 - Опис параметрів об'єкта **SignInfo**

.. csv-table:: 
  :file: for_csv/SignInfo.csv
  :widths:  1, 7, 12, 41
  :header-rows: 1
  :stub-columns: 0

``RESPONSE``

У **відповідь** передається код сервера 200 (ok).

--------------

**Приклади**
~~~~~~~~~~~~~~~~~~

**Приклад тіла запиту (json):**

.. code:: ruby

    {
      "signInfo": {
        "certData": [
          {
            "EDRPOUCode": "",
            "isTimeStamp": true,
            "ownerName": "ЕДІН Тест ФОП",
            "serial": "1A15A67BC8E82F4C040000003AFA04000F890B00",
            "signDate": "08.08.2019 13:46 ",
            "subjOrg": "ЕДІН Тест ФОП",
            "subjTitle": "ЕДІН Тест ФОП"
          }
        ],
        "count": 1,
        "date": null,
        "hash": "3BC3AF062BCC00D51EC20EEDF6D4D7A7"
      },
      "signs": [
        {
          "sign": "MIIX0Q...Q5/XCjmk1pXR8mrASIx3U1zV0=",
          "type": 1
        }
      ]
    }

--------------

У **відповідь** передається код сервера 200 (ok).

